<!doctype html>
<html lang='en'>
<head>
<title>SageSchedule.</title>
<script
  src="https://code.jquery.com/jquery-3.6.0.js"
  integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk="
  crossorigin="anonymous"></script>
<link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}"/>
</head>

<body>
<div class='flex flex-wrap flex-col overflow-hidden'>
    <!-- <nav>
        <h1 class="font-bold text-6xl">Courses</h1>
    </nav> -->
    <div class="flex flex-wrap overflow-hidden">
    <div class="p-8 w-1/2"> <!-- Div with search box -->
        <form action="{{ url_for('search') }}">
            <div class="bg-white flex items-center rounded-full shadow-md">
            <input class="rounded-l-full w-full py-4 px-6 text-gray-700 leading-tight
                            focus:outline-none" id="search" type="text" placeholder="Search..." 
                            name="q">
                <div class="p-4">
                    <button class="bg-pink-600 text-white rounded-full p-2 hover:bg-pink-300
                        focus:outline-none w-12 h-12 flex items-center justify-center"
                    type="submit">
                        구하다
                    </button>
                </div>
            </div>
        </form>
    </div>
    <!-- <div id='sidebarButton' class='w-1/2 self-center flex justify-end'>
        <button class="bg-transparent hover:bg-blue-500 text-blue-700 font-semibold hover:text-white py-2 px-4 mr-10 border border-blue-500 hover:border-transparent rounded">
            Click here to see graduation planner
          </button>
    </div> -->
    </div>

    <div class='grid grid-rows-3 grid-flow-col gap-4'> <!-- div below search, side by side search results and schedule -->
        {% if courses is not none %} <!-- Course search results, if it exists -->
        <div class="row-span-3 flex-wrap">
            <table class="rounded-lg rounded-b-lg m-5 w-11/12 mx-auto text-pink-100 bg-pink-700">
                <thead class="flex w-full">
                    <tr class="text-left font-bold border-b-2 border-pink-200 flex w-full">
                    <td class="px-4 py-3 w-1/8"></td>
                    <th class="px-4 py-3 w-1/3">Course Number</th>
                    <th class="px-4 py-3 w-1/3">Course Name</th>
                    <th class="px-4 py-3 w-1/3">Area</th>
                    </tr>
                </thead>
                <!-- each row -->
                <tbody class='overflow-y-auto flex flex-col w-full' style="height: 75vh">
                {% for index, course in courses.iterrows() %}
                <tr class="bg-pink-600 font-semibold w-full flex">
                    <td class="px-4 py-3 border-b border-pink-500 w-1/8">
                        <button onclick="toggleModal('{{course.to_json()}}')"
                        class="bg-transparent hover:text-pink-600
                        hover:bg-white font-semibold py-2 px-4 border border-white text-white
                        rounded-full" style="padding:0">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-plus" viewBox="0 0 16 16">
                            <path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"/>
                        </svg>
                        </button>
                    </td>
                    <td class="px-4 py-3 border-b border-pink-500 w-1/3">{{course[0]}}</td>
                    <td class="px-4 py-3 border-b border-pink-500 w-1/3">{{course[1]}}</td>
                    <td class="px-4 py-3 border-b border-pink-500 w-1/3">
                        {{'N/A' if course[2] == 'nan' else course[2]}}
                    </td>
                </tr>    
                {% endfor %}
                </tbody>
            </table>
        </div>
        {% endif %}
        <div class="row-span-1 flex justify-center items-start bg-green-200 shadow-lg mx-3">
            <div class="flex flex-col px-6 py-8 w-1/2">
                <h1 class="mb-8 font-extrabold text-gray-800 leading-6">Breadth Requirements</h1>
                <ul class="flex flex-col space-y-4 text-gray-900">
                    {% for i in range(6) %}
                    {% set area_course = session['breadth_reqs'][i] %}
                    {% set color = 'gray' if not area_course else 'purple' %}
                    <div id="area{{i}}"
                        class="bg-{{color}}-100 border-l-4 border-{{color}}-300 rounded-md w-full px-6 py-2 cursor-pointer">
                            Area {{i+1}} - {{ area_course['Course Number'] if area_course else 'Incomplete'}}
                    </div>
                    {% endfor %}
                </ul>
            </div>
            <div class="flex flex-col px-6 py-8 w-1/2">
                <h1 class="mb-8 font-extrabold text-gray-800 leading-6">Overlay Requirements</h1>
                <ul class="flex flex-col space-y-4 text-gray-900">
                    <div
                        class="bg-yellow-100 border-l-4 border-yellow-300 rounded-md w-full px-6 py-2 cursor-pointer">
                        Analyzing Difference</div>
                    <div
                        class="bg-purple-100 border-l-4 border-purple-300 rounded-md w-full px-6 py-2 cursor-pointer">
                        Writing Intensive</div>
                    <div
                        class="bg-red-100 border-l-4 border-red-300 rounded-md w-full px-6 py-2 cursor-pointer">
                        Speaking Intensive</div>
                </ul>
            </div>
        </div>
        <div class="row-span-2 flex justify-center items-start">
            <div class="grid grid-cols-2 md:grid-cols-2 sm:grid-cols-1 gap-y-10 gap-x-2 w-full mx-auto my-5">
            {% for semester in session['semesters'] %}
            <div class="rounded-lg bg-blue-200 w-11/12 p-2 mx-auto">
                <div class="flex justify-between py-1 px">
                    <h3 class="text-sm font-bold">
                        {{ semester }}
                    </h3>
                </div>
                <div class="text-sm mt-2">
                    {% for course in session[semester] %}
                    <div class="select-none cursor-pointer bg-gray-200 rounded-md flex flex-1 items-center p-4 mb-2 transition duration-500 ease-in-out transform hover:-translate-y-1 hover:shadow-lg">
                        <div class="flex-1 pl-1 mr-16">
                            <div class="font-medium w-3/4 truncate overflow-ellipsis">
                                {{course['Course Title']}}
                            </div>
                            <div class="hidden md:block text-gray-600 text-sm">{{course['Course Number']}}</div>
                        </div>
                        <div class="text-gray-600 text-xs truncate">1 credit</div>
                    </div>
                    {% endfor %}
                    <div class="mt-3 text-gray-600 rounded-md border-dashed border-gray-500
                    border-2 p-4 hover:border-blue-50 transition duration-100 ease-in-out
                    transform">
                        {% if courses is not none %}
                            Add courses using the '+' button!
                        {% else %}
                            Search to add a course!
                        {% endif %}
                    </div>
                </div>
            </div>
            {% endfor %}
            </div>
        </div>
    </div>
    {% include 'modal.html' %}
</div>
<script src="{{ url_for('static', filename='main.js') }}"></script>
</body>
</html>